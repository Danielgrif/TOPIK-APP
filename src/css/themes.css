body.dark-mode {
    --bg: #1e1b4b;
    --surface-1: #28235e;
    --surface-2: #312e6f;
    --surface-3: #3730a3;
    --text-main: #e2e8f0;     /* Soft white */
    --text-sub: #94a3b8;      /* Slate-400 */
    --text-tertiary: #64748b;
    --border-color: #3730a3;
    --input-bg: #312e6f;

    --primary: #a78bfa;
    --primary-hover: #8b5cf6;
    --primary-light: rgba(167, 139, 250, 0.15);
    --accent: #c4b5fd;
    --success: #34d399;
    --danger: #fb7185;
    --warning: #fbbf24;
    --info: #60a5fa;

    --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
    --shadow-md: 0 8px 24px rgba(0,0,0,0.4);
    --shadow-lg: 0 16px 48px rgba(0,0,0,0.5);
}

/* Flash Effects */
body.correct-flash { background: #d1fae5 !important; }
body.wrong-flash { background: #fee2e2 !important; }

/* Damage Effect (Survival Mode) */
@keyframes damage-vignette {
    0% { box-shadow: inset 0 0 0 0 rgba(239, 68, 68, 0); }
    15% { box-shadow: inset 0 0 120px 40px rgba(239, 68, 68, 0.6); }
    100% { box-shadow: inset 0 0 0 0 rgba(239, 68, 68, 0); }
}

body.damage-flash { animation: damage-vignette 0.6s cubic-bezier(0.1, 0, 0.2, 1); }

/* Focus Mode */
body.focus-mode .virtual-scroll-container {
    scroll-snap-type: y mandatory;
}
body.focus-mode { background: #000000; }
body.focus-mode #main-header,
body.focus-mode .content-toolbar,
body.focus-mode .install-banner,
body.focus-mode #bottom-nav { display: none; }

body.focus-mode #main-header {
    transform: translateY(-100%);
}
body.focus-mode .card {
    height: auto !important;
    min-height: 400px;
    scroll-margin-top: 10px;
    scroll-snap-align: start;
    /* Отключаем 3D-эффект наклона при наведении в режиме фокуса */
    transform: none !important;
}

body.focus-mode .card-inner {
    /* Фиксируем тень, чтобы она не двигалась */
    box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.2) !important;
}